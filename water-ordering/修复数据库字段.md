# 修复数据库字段问题

## 问题描述

登录接口报错：`Unknown column 'users.phone_verified' in 'field list'`

这是因为数据库表中缺少 `phone_verified` 字段。

## 快速修复（推荐）

### 方法1：直接执行SQL（最快）

在MySQL客户端或命令行中执行：

```sql
ALTER TABLE users 
ADD COLUMN phone_verified BOOLEAN DEFAULT FALSE COMMENT '手机号是否已验证';
```

### 方法2：使用SQL文件

```bash
mysql -u你的用户名 -p water_ordering < e:\cursor-test\water-ordering\backend\修复数据库字段.sql
```

### 方法3：使用Python脚本

```bash
cd e:\cursor-test\water-ordering\backend
python scripts/add_phone_verified_field.py
```

## 验证

执行后，可以验证字段是否添加成功：

```sql
DESCRIBE users;
```

或者：

```sql
SELECT COLUMN_NAME 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_SCHEMA = 'water_ordering' 
AND TABLE_NAME = 'users' 
AND COLUMN_NAME = 'phone_verified';
```

如果查询有结果，说明字段已添加成功。

## 注意事项

- 如果字段已存在，执行SQL会报错，可以忽略
- 新添加的字段默认值为 `FALSE`
- 已存在的用户记录，`phone_verified` 字段会自动设置为 `FALSE`
- 用户通过手机号验证码登录后，该字段会自动更新为 `TRUE`

